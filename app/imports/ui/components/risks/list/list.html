<template name="Risks_List">
  {{#List_Read
    ref="list"
    _id=riskId
    onModalOpen=onModalOpen
    onSearchInputValue=onSearchInputValue}}

      {{#if isActiveRiskFilter 1}}
        {{#each types}}
          {{> ListItem
              template='Risks_SectionItem'
              title=this.title
              _query=(_getTypeQuery this)}}
        {{/each}}

        {{#with uncategorizedByTypes}}
          {{> ListItem
              template='Risks_SectionItem'
              title=this.title
              _options=_getUncategorizedRisksOptions
              _query=(_getUncategorizedRisksQuery this.risks)}}
        {{/with}}
      {{/if}}

      {{#if isActiveRiskFilter 2}}
        {{#each statuses}}
          {{> ListItem
              template="Risks_SectionItem"
              title=(getStatusName this)
              _query=(_getStatusQuery this)}}
        {{/each}}
      {{/if}}

      {{#if isActiveRiskFilter 3}}
        {{#each departments}}
          {{> ListItem
              template="Risks_SectionItem"
              title=this.name
              closeAllOnCollapse=false
              _query=(_getDepartmentQuery this)}}
        {{/each}}

        {{#with uncategorizedByDepartments}}
          {{> ListItem
              template="Risks_SectionItem"
              title=this.name
              closeAllOnCollapse=false
              _options=_getUncategorizedRisksOptions
              _query=(_getUncategorizedRisksQuery this.risks)}}
        {{/with}}
      {{/if}}

      {{#if isActiveRiskFilter 4}}
        {{#each risksDeleted}}
          {{> Risks_Item}}
        {{/each}}
      {{/if}}

  {{/List_Read}}
</template>
