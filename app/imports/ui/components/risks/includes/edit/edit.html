<template name="Risks_Card_Edit">
  <div>
    <div class="relative">
      {{#with risk}}
        {{> Risk_Card_Edit_Main
            risk=this
            methodRefs=getMethodRefs}}

        {{#if showRootCauseAnalysis}}
          {{> Subcards_RCA_Edit
              _id=this._id
              analysis=this.analysis
              updateOfStandards=this.updateOfStandards
              magnitude=this.magnitude
              methodRefs=getMethodRefs}}
        {{/if}}

        {{> Subcards_Notify_Edit
            doc=this
            documentType="risk"
            onUpdate=onUpdateNotifyUserCb}}

        {{> Subcards_RiskScoring_Edit
            _id=this._id
            scores=this.scores
            onInsert=onInsertScoreCb
            onRemove=onRemoveScoreCb}}

        {{> Subcards_RiskEvaluation_Edit
            _id=this._id
            riskEvaluation=this.riskEvaluation}}

        {{> Subcards_ImprovementPlan_Edit
            label="Treatment plan"
            documentId=this._id
            documentType="risk"}}

        {{> Subcards_Actions_Edit
            type="CA"
            documentId=this._id
            documentType="risk"}}

        {{> Subcards_Actions_Edit
            type="RC"
            documentId=this._id
            documentType="risk"}}

        {{> Subcards_LessonsLearned_Edit
            documentId=this._id
            documentType="risk"
            linkedTo=this.title
            linkedToId=this.sequentialId}}

        {{> Subcards_OtherFiles_Edit
            _id=this._id
            files=this.files
            uploaderMetaContext=uploaderMetaContext
            slingshotDirective=slingshotDirective}}

        {{> Subcards_Review_Edit
            _id=this._id
            review=this.review
            onUpdate=onUpdateCb}}
      {{/with}}
      <div class="card-block text-xs-center">
        <button type="button" class="btn btn-secondary" {{b "click: remove"}}>Delete</button>
      </div>
    </div>
  </div>
</template>
