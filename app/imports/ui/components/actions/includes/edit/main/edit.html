<template name="Actions_Card_Edit_Main">
  <div class="card-block">
    {{> Actions_Title title=title}}

    {{> Actions_LinkedTo_Edit
        _id=_id
        isEditable=isLinkedToEditable
        linkedTo=linkedTo
        type=type
        standardId=standardId
        onLink=onLinkDocument
        onUnlink=onUnlinkDocument}}

    {{> Actions_Status status=status}}

    {{> Actions_Owner ownerId=ownerId}}

    {{> Actions_PlanInPlace planInPlace=planInPlace}}

    <hr />

    {{> Actions_CompletionTargetDate
        completionTargetDate=completionTargetDate
        enabled=isCompletionEditable
        onUpdate=onUpdateCompletionDate}}

    {{#unless isCompleted}}

      {{> Actions_ToBeCompletedBy
          _id=this._id
          toBeCompletedBy=toBeCompletedBy
          onComplete=onComplete
          onUpdate=onUpdateCompletionExecutor}}

    {{else}}

      {{> Actions_CompletedOn
          completedAt=completedAt
          enabled=isCompletionEditable}}

      {{> Actions_CompletedBy
          completedBy=completedBy
          completedAt=completedAt
          enabled=isCompletionEditable
          onUndo=onUndoCompletion}}

      {{> Actions_CompletionComments
          completionComments=completionComments
          enabled=isCompletionEditable}}

      {{#if showVerification}}
        <hr />

        {{> Actions_VerificationTargetDate
            verificationTargetDate=verificationTargetDate
            onUpdate=onUpdateVerificationDate}}

        {{#unless isVerified}}

          {{> Actions_ToBeVerifiedBy
              toBeVerifiedBy=toBeVerifiedBy
              onUpdate=onUpdateVerificationExecutor
              onVerify=onVerify}}

        {{else}}

          {{> Actions_VerifiedOn verifiedAt=verifiedAt}}

          {{> Actions_VerifiedBy
              verifiedBy=verifiedBy
              verifiedAt=verifiedAt
              onUndo=onUndoVerification}}

          {{> Actions_VerificationComments
              verificationComments=verificationComments}}

        {{/unless}}
      {{/if}}

    {{/unless}}
  </div>
</template>
