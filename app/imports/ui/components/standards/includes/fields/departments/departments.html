<template name="ESDepartments">
  {{#FormField label="Department(s)"}}
    {{#each currentDepartments}}
        <div class="btn-group">
          <button type="button" class="btn btn-secondary" disabled="" {{b "text: this.name"}}></button>
          <button type="button" class="btn btn-secondary" {{b "click: update(this, '$pull')"}}><i class="fa fa-times-circle"></i></button>
        </div>
    {{/each}}
    <div class="dropdown">
      <input type="text" class="form-control" placeholder="Add a department" data-toggle="dropdown"
        {{b "value: department, throttle: 300"}}/>
      <div class="dropdown-menu dropdown-menu-full">
        {{#each departments}}
          <a class="dropdown-item pointer" {{b "text: this.name, click: update(this, '$addToSet')"}}></a>
        {{/each}}
        <div class="dropdown-divider" {{b "if: departments.count > 0"}}></div>
        <a class="dropdown-item pointer" {{b "click: addNewDepartment"}}><strong {{b "text: departmentHintText"}}>Add new department</strong></a>
      </div>
    </div>
  {{/FormField}}
</template>
