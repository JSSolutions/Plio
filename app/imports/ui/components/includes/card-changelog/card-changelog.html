<template name="CardChangelog">
  {{#with document}}
    <div class="card-footer card-changelog-toggle" {{b "click: toggleLogs, class: { collapsed: collapsed, waiting: showSpinner }"}}>
      <div class="row">
        <div class="col-xs-6">
          Created by: <span {{b "text: userNameOrEmail(this.createdBy)"}}></span>
          <br>Date: <span {{b "text: renderDate(this.createdAt)"}}></span>
        </div>
        <div class="col-xs-6" {{b "if: this.updatedBy && this.updatedAt"}}>
          Last edited by: <span {{b "text: userNameOrEmail(this.updatedBy)"}}></span>
          <br>Date: <span {{b "text: renderDate(this.updatedAt)"}}></span>
        </div>
      </div>
    </div>

    <div class="card-changelog collapse" {{b "ref: collapse, class: { in: !collapsed}"}}>
      <table class="table table-sm">
        <thead>
          <tr>
            <th>Name</th>
            <th>Change summary</th>
            <th class="text-right">Date &amp; time</th>
          </tr>
        </thead>
        <tbody>
          {{#each logs}}
            <tr>
              <td>{{getUser executor}}</td>
              <td>{{message}}</td>
              <td class="text-right">{{getPrettyDate date}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
      <div class="card-footer">
        <a class="btn btn-secondary pointer">View all changes ({{total}} total)</a>
      </div>
    </div>
  {{/with}}
</template>
